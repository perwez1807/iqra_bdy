/* --- Global Reset and Base Styles --- */
body {
    margin: 0;
    overflow: hidden;
    font-family: 'Dancing Script', cursive; 
    transition: background-color 1s ease-in-out;
}

/* --- Screen Transitions --- */
.screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease-in-out, background-color 1s ease-in-out;
}

.screen.active {
    opacity: 1;
    visibility: visible;
}

.black-bg {
    background-color: black;
}
.white-bg {
    background-color: white !important;
}

/* --- VIDEO SCREEN STYLES --- */
#video-screen {
    z-index: 200; 
    background-color: black;
}

#surprise-video {
    width: 100%;
    height: 100%;
    object-fit: contain; 
}


/* --- Stage 1: Greeting Fix --- */
#greeting-screen {
    z-index: 100;
}

#greeting-text {
    font-size: 10vw; 
    text-align: center;
    color: #ff69b4; 
    text-shadow: 0 0 10px #ff1493, 0 0 20px #ff1493, 0 0 30px #ff1493; 
    transition: opacity 0.3s ease-out; 
    font-weight: 700; 
}

/* --- Images --- */
.story-image {
    position: absolute;
    opacity: 0;
    transition: opacity 0.7s ease-in-out;
    z-index: 30; 
    pointer-events: none;
}

.story-image.visible {
    opacity: 1;
    pointer-events: auto;
}

.stage-2 {
    max-width: 80%; 
    max-height: 80%; 
}

.stage-3 {
    max-width: 65%; 
    max-height: 65%; 
}

.stage-2, .stage-3 {
    top: 45%; 
    left: 50%;
    transform: translate(-50%, -50%);
}

#card-img.slide-up {
    animation: slide-up-reveal 0.7s ease-out forwards;
}

@keyframes slide-up-reveal {
    0% {
        opacity: 0;
        transform: translate(-50%, 0%); 
    }
    100% {
        opacity: 1;
        transform: translate(-50%, -50%); 
    }
}

.center-stage-image {
    position: absolute;
    top: 45%; 
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 60%;
    max-height: 60%;
    opacity: 0;
    transition: opacity 0.7s ease-in-out;
    z-index: 40; 
}

.banner-top {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 800px;
    height: auto;
    /* Banner remains at z-index 20 */
    z-index: 20; 
}

/* --- Buttons --- */
.button-container {
    position: absolute;
    bottom: 10vh; 
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    z-index: 50; 
    width: 300px;
    max-width: 90%;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease-in-out;
}

.button-container.visible {
    opacity: 1;
    visibility: visible;
}

.action-btn {
    background-color: #ff69b4; 
    color: white;
    border: none;
    padding: 15px 30px;
    font-size: 1.2em;
    cursor: pointer;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(255, 105, 180, 0.5);
    transition: background-color 0.3s, transform 0.2s;
    width: 100%;
    height: 60px; 
}

.action-btn:hover {
    background-color: #ff479e;
    transform: scale(1.05);
}

.blue-btn {
    background-color: #007bff; 
    box-shadow: 0 5px 15px rgba(0, 123, 255, 0.5);
}

.blue-btn:hover {
    background-color: #0056b3;
}

.click-here {
    font-family: sans-serif; 
    color: white; 
    font-size: 0.8em; 
    margin-top: 5px; 
    padding-bottom: 5px; 
    font-weight: 500; 
    text-shadow: 0 0 3px #ff69b4; 
    opacity: 0;
    animation: fadeIn 1s 0.5s forwards; 
}

#main-content-screen.white-bg .click-here {
    color: #ff69b4; 
    text-shadow: none; 
}

@keyframes fadeIn {
    to { opacity: 1; }
}

/* --- Disco Light (Static effect) --- */
#disco-light-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    background: radial-gradient(circle at 50% 10%, rgba(255, 255, 255, 0.5) 0%, transparent 70%); 
    pointer-events: none;
    z-index: 10; 
    transition: opacity 1s ease-in-out;
}

#disco-light-effect.active {
    opacity: 1;
    animation: disco-glow 0.8s infinite alternate; 
}

@keyframes disco-glow {
    from { box-shadow: 0 0 50px rgba(255, 0, 0, 0.8), 0 0 100px rgba(0, 255, 0, 0.8), 0 0 150px rgba(0, 0, 255, 0.8); }
    to { box-shadow: 0 0 50px rgba(0, 255, 255, 0.8), 0 0 100px rgba(255, 0, 255, 0.8), 0 0 150px rgba(255, 255, 0, 0.8); }
}

/* --- Dynamic Bulb Effect Styles --- */
#bulb-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 80px; 
    overflow: hidden; 
    /* Bulbs remain BEHIND the banner (z-index 20) */
    z-index: 15; 
    display: flex;
    justify-content: space-around; 
    align-items: center;
    opacity: 0; 
    transition: opacity 0.7s ease-in-out;
}

#bulb-effect.active {
    opacity: 1;
}

.color-bulb {
    width: 40px; 
    height: auto;
    opacity: 0; 
    transform: translateY(-50px); 
}

/* Animation for individual bulbs appearing */
@keyframes bulb-drop-fade {
    0% {
        opacity: 0;
        transform: translateY(-50px) scale(0.6); 
    }
    50% {
        opacity: 1;
        transform: translateY(0px) scale(1);
    }
    100% {
        opacity: 1;
        transform: translateY(0px) scale(1);
    }
}

/* --- GLOW AND BLINK EFFECT (on bulbs) --- */
.color-bulb.yellow { filter: drop-shadow(0 0 10px #fff700) drop-shadow(0 0 15px #fff700); }
.color-bulb.red { filter: drop-shadow(0 0 10px #e02d31) drop-shadow(0 0 15px #e02d31); }
.color-bulb.blue { filter: drop-shadow(0 0 10px #3c48e3) drop-shadow(0 0 15px #3c48e3); }
.color-bulb.green { filter: drop-shadow(0 0 10px #4BDB4C) drop-shadow(0 0 15px #4BDB4C); }
.color-bulb.pink { filter: drop-shadow(0 0 10px #ff6ee6) drop-shadow(0 0 15px #ff6ee6); }
.color-bulb.orange { filter: drop-shadow(0 0 10px #fd8619) drop-shadow(0 0 15px #fd8619); }

@keyframes lightBlink {
    0% { filter: brightness(1) drop-shadow(0 0 10px white); }
    50% { filter: brightness(2) drop-shadow(0 0 20px white); } 
    100% { filter: brightness(1) drop-shadow(0 0 10px white); }
}

.color-bulb {
    animation-name: bulb-drop-fade, lightBlink;
    animation-duration: 1.5s, 2s;
    animation-timing-function: ease-out, ease-in-out;
    animation-delay: 0s, 1.5s; 
    animation-iteration-count: 1, infinite;
    animation-fill-mode: forwards;
}


/* --- CORNER AND FLOATING BALLOONS (BLN.PNG) STYLES --- */

@keyframes balloon-pop {
    0% { transform: scale(0.5); opacity: 0; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

/* Fixed corner balloons (Base size) */
.balloon {
    position: absolute;
    width: 80px; 
    height: auto;
    opacity: 0;
    transition: opacity 0.7s ease-in-out;
    /* FIX: Increased z-index to 25 to be IN FRONT of the banner (z-index 20) */
    z-index: 25; 
}
.balloon.visible {
    opacity: 1;
    transition: none; 
}
.balloon-entry {
    animation: balloon-pop 0.5s ease-out forwards;
}

/* Class for making balloons smaller (60px) */
.small-balloon {
    width: 60px !important; 
    height: auto;
}

/* Specific classes for top and middle positioning */
/* Top Row (5% from top) */
.balloon-top-left { 
    top: 5%; 
    left: 5%; 
    animation-delay: 0.1s; 
}
.balloon-top-right { 
    top: 5%; 
    right: 5%; 
    animation-delay: 0.2s; 
}

/* Middle Row (35% from top) */
.balloon-middle-left { 
    top: 35%; 
    left: 5%; 
    animation-delay: 0.3s; 
    transform: translateY(-50%); 
}
.balloon-middle-right { 
    top: 35%; 
    right: 5%; 
    animation-delay: 0.4s; 
    transform: translateY(-50%); 
}

/* --- NEW CONFETTI CANVAS (Continuous Fall) --- */
#confettiCanvas {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100vw;
    height: 100vh; 
    pointer-events: none; 
    z-index: 90; 
}

/* --- NEW FLOATING BALLOONS (Niche se Upar) --- */
#floatingBalloons {
    position: fixed; 
    bottom: -150px; 
    width: 100vw; 
    height: 100vh;
    pointer-events: none; 
    z-index: 80; 
    overflow: visible;
}

#floatingBalloons.hidden {
    display: none;
}

.multiple-balloon {
    position: absolute; 
    bottom: 0; 
    width: 80px; 
    height: auto;
    
    animation-name: floatUp, pulseOpacity;
    animation-duration: 10s, 4s; 
    animation-iteration-count: infinite, infinite;
    animation-timing-function: linear, ease-in-out;
    will-change: transform, opacity;
}

@keyframes floatUp {
    0% { transform: translateY(0) scale(1); }
    100% { transform: translateY(-110vh) scale(1.5); } 
}

@keyframes pulseOpacity {
    0% { opacity: 0.6; }
    50% { opacity: 1; }
    100% { opacity: 0.6; }
}


/* --- NEW STATIC RIBBON IMAGES (RIBBON.PNG) STYLES --- */

@keyframes ribbon-slide-down {
    0% { transform: translateY(-100px) rotate(var(--initial-rotation, 0deg)); opacity: 0; }
    100% { transform: translateY(0) rotate(var(--initial-rotation, 0deg)); opacity: 1; }
}

.static-ribbon {
    position: fixed;
    width: 150px; 
    height: auto;
    opacity: 0; 
    z-index: 70; 
    transition: none; 
    pointer-events: none; 
    transform-origin: top center;
}

/* Specific positioning for each ribbon (Top property is 0 because entry animation handles the drop) */
#ribbon-left-top { top: 0; left: 5%; --initial-rotation: -15deg; --final-rotation: 345deg; }
#ribbon-left-bottom { top: 0; left: 15%; --initial-rotation: 5deg; --final-rotation: 365deg; }
#ribbon-right-top { top: 0; right: 5%; --initial-rotation: 10deg; --final-rotation: 370deg; }
#ribbon-right-bottom { top: 0; right: 15%; --initial-rotation: -8deg; --final-rotation: 352deg; }


/* Animation classes */
.static-ribbon.ribbon-entry {
    animation: ribbon-slide-down 0.8s ease-out forwards;
}

.static-ribbon.falling-ribbon {
    /* Combine Entry and Continuous Fall animations */
    animation-name: ribbon-slide-down, ribbonFall;
    animation-duration: 0.8s, 10s;
    /* Uses the variable set in JS for initial delay */
    animation-delay: var(--initial-delay, 0s), 0.8s; 
    animation-timing-function: ease-out, linear;
    animation-iteration-count: 1, infinite;
    animation-fill-mode: forwards;
}

@keyframes ribbonFall {
    0% { transform: translateY(0) rotate(var(--initial-rotation)); opacity: 1; }
    100% { transform: translateY(calc(100vh + 200px)) rotate(var(--final-rotation)); opacity: 0.5; } 
}

/* Apply specific durations for continuous fall */
#ribbon-left-top.falling-ribbon { animation-duration: 0.8s, 9s; }
#ribbon-left-bottom.falling-ribbon { animation-duration: 0.8s, 11s; }
#ribbon-right-top.falling-ribbon { animation-duration: 0.8s, 8s; }
#ribbon-right-bottom.falling-ribbon { animation-duration: 0.8s, 10s; }
